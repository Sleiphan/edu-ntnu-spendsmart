<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Invoice.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">demo</a> &gt; <a href="index.source.html" class="el_package">edu.ntnu.g14</a> &gt; <span class="el_source">Invoice.java</span></div><h1>Invoice.java</h1><pre class="source lang-java linenums">package edu.ntnu.g14;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.time.format.DateTimeFormatter;

/**
 * The invoice class represents an invoice.
 */
public class Invoice {
    private LocalDate dueDate;
    private BigDecimal amount;
    private String recipientAccountNumber;
    private String comment;
<span class="fc" id="L15">    private static final DateTimeFormatter dateFormatter = </span>
<span class="fc" id="L16">    DateTimeFormatter.ofPattern(&quot;dd/MM/yyyy&quot;);</span>

    /**
    * Constructor for an Invoice object with a due date, an amount, 
    * a recipient account number, and a comment.
    * Throws IllegalArgumentException if amount is less than 1, 
    * recipient account number is blank or does not contain 11 digits 
    * separated by 2 dots, or comment is null.
    *
    * @param dueDate                  the due date of the invoice
    * @param amount                   the amount of the invoice
    * @param recipientAccountNumber   the recipient account number of the invoice
    * @param comment                  the comment of the invoice
    * @throws IllegalArgumentException if amount is less than 1, 
    * recipient account number is blank or does not contain 11 digits separated by 2 dots, or comment is null.
    */
<span class="fc" id="L32">    public Invoice(final LocalDate dueDate, final BigDecimal amount, String recipientAccountNumber, String comment) {</span>
<span class="pc bpc" id="L33" title="1 of 2 branches missed.">        if (amount.intValue() &lt; 1)</span>
<span class="nc" id="L34">            throw new IllegalArgumentException(&quot;The invoice must have a value greater than 1&quot;);</span>

<span class="pc bpc" id="L36" title="1 of 2 branches missed.">        if (recipientAccountNumber.isBlank())</span>
<span class="nc" id="L37">            throw new IllegalArgumentException(&quot;The recipients account number must be entered!&quot;);</span>

<span class="pc bpc" id="L39" title="1 of 2 branches missed.">        else if (recipientAccountNumber.length() != 13)</span>
<span class="nc" id="L40">            throw new IllegalArgumentException(&quot;The recipients account number must contain 11 digits, &quot; +</span>
                    &quot;seperated by 2 dots&quot;);

<span class="pc bpc" id="L43" title="1 of 2 branches missed.">        if (comment == null)</span>
<span class="nc" id="L44">            throw new IllegalArgumentException(&quot;CID/Comment cannot be null&quot;);</span>

<span class="fc" id="L46">        this.dueDate = dueDate;</span>
<span class="fc" id="L47">        this.amount = amount;</span>
<span class="fc" id="L48">        this.recipientAccountNumber = recipientAccountNumber;</span>
<span class="fc" id="L49">        this.comment = comment;</span>
<span class="fc" id="L50">    }</span>

    /**
    * Changes the recipient account number of the invoice.
    * Throws IllegalArgumentException if the new recipient account number is blank or does not contain 11 digits separated by 2 dots.
    *
    * @param newRecipientAccountNumber the new recipient account number of the invoice
    * @return true if the recipient account number was successfully changed
    * @throws IllegalArgumentException if the new recipient account number is blank or does not contain 11 digits separated by 2 dots.
    */
    public boolean changeRecipientAccountNumber(String newRecipientAccountNumber) {
<span class="nc bnc" id="L61" title="All 2 branches missed.">        if (recipientAccountNumber.isBlank()) {</span>
<span class="nc" id="L62">            throw new IllegalArgumentException(&quot;The recipients account number must be entered!&quot;);</span>
        }
<span class="nc bnc" id="L64" title="All 2 branches missed.">        else if (recipientAccountNumber.length() != 13) {</span>
<span class="nc" id="L65">            throw new IllegalArgumentException(&quot;The recipients account number must contain 11 digits, &quot; +</span>
                    &quot;seperated by 2 dots&quot;);
        }
<span class="nc" id="L68">        this.recipientAccountNumber = newRecipientAccountNumber;</span>
<span class="nc" id="L69">        return true;</span>
    }

    /**
    * Changes the due date of the invoice.
    *
    * @param newDueDate the new due date for the invoice
    * @return true if the due date is successfully changed
    * @throws IllegalArgumentException if the new due date is in the past
    */
    public boolean changeDueDate(final LocalDate newDueDate) {
<span class="nc bnc" id="L80" title="All 2 branches missed.">        if (newDueDate.isBefore(LocalDate.now())) {</span>
<span class="nc" id="L81">            throw new IllegalArgumentException(&quot;This date has already passed&quot;);</span>
        }
<span class="nc" id="L83">        this.dueDate = newDueDate;</span>
<span class="nc" id="L84">        return true;</span>
    }

    /**
    * Changes the amount of the invoice.
    *
    * @param newAmount the new amount for the invoice
    * @return true if the amount is successfully changed
    * @throws IllegalArgumentException if the new amount is less than 1
    */
    public boolean changeAmount(final BigDecimal newAmount) {
<span class="nc bnc" id="L95" title="All 2 branches missed.">        if (amount.intValue() &lt; 1) {</span>
<span class="nc" id="L96">            throw new IllegalArgumentException(&quot;The invoice must have a value greater than 1&quot;);</span>
        }
<span class="nc" id="L98">        this.amount = newAmount;</span>
<span class="nc" id="L99">        return true;</span>
    }

    /**
    * Returns a string representation of the invoice.
    *
    * @return a string representation of the invoice
    */
    public String toString() {
<span class="fc" id="L108">        return &quot;[&quot; + dueDate + &quot;] &quot; + &quot;:&quot; + amount + &quot;kr \&quot;&quot; + comment + &quot;\&quot;&quot;;</span>
    }

    /**
    * Returns the recipient account number for the invoice.
    *
    * @return the recipient account number
    */
    public String getRecipientAccountNumber() {
<span class="nc" id="L117">        return recipientAccountNumber;</span>
    }

    /**
    * Returns the amount for the invoice.
    *
    * @return the amount
    */
    public BigDecimal getAmount() {
<span class="nc" id="L126">        return amount;</span>
    }

    /**
    * Returns the due date for the invoice.
    *
    * @return the due date
    */
    public LocalDate getDueDate() {
<span class="nc" id="L135">        return dueDate;</span>
    }

    /**
    * Returns the comment for the invoice.
    *
    * @return the comment
    */
<span class="nc" id="L143">    public String getComment() { return comment; }</span>

    public static final String CSV_FIELD_DELIMITER = &quot;;&quot;;
    
    /**
    * Returns a CSV string representation of the invoice.
    *
    * @return a CSV string representation of the invoice
    */
    public String toCSVString() {
<span class="nc" id="L153">        return dueDate.format(dateFormatter) + CSV_FIELD_DELIMITER +</span>
<span class="nc" id="L154">                        amount.toPlainString() + CSV_FIELD_DELIMITER +</span>
                        recipientAccountNumber + CSV_FIELD_DELIMITER +
                        &quot;\&quot;&quot; + comment + &quot;\&quot;&quot;;
    }

    /**
    * Creates a new invoice object from a CSV string representation.
    *
    * @param csvString the CSV string representation of the invoice
    * @return a new invoice object created from the CSV string representation
    */
    public static Invoice fromCSVString(String csvString) {
<span class="nc" id="L166">      String[] fields = csvString.split(CSV_FIELD_DELIMITER + &quot;(?!\\s)&quot;);</span>
<span class="nc" id="L167">      String recipient   = fields[2];</span>
<span class="nc" id="L168">      BigDecimal amount           = new BigDecimal(fields[1]);</span>
<span class="nc" id="L169">      LocalDate dateOfTransaction = LocalDate.parse(fields[0], dateFormatter);</span>
<span class="nc" id="L170">      String comment = fields[3].substring(1, fields[3].length() - 1);</span>

<span class="nc" id="L172">      return new Invoice(dateOfTransaction, amount, recipient, comment);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>