<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Transaction.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">demo</a> &gt; <a href="index.source.html" class="el_package">edu.ntnu.g14</a> &gt; <span class="el_source">Transaction.java</span></div><h1>Transaction.java</h1><pre class="source lang-java linenums">package edu.ntnu.g14;

import edu.ntnu.g14.frontend.ApplicationObjects;

import java.math.BigDecimal;
import java.time.LocalDate;
import java.util.Objects;
import java.util.regex.Pattern;

/**
 * This class represents a transaction object. It contains information about the source and destination accounts, amount, description,
 * date of transaction, and category.
 *
 * @author G14
 * @version 1.0
 * @since 2023-04-25
 */
public class Transaction {
    private final String fromAccountNumber;
    private final String toAccountNumber;
    private final BigDecimal amount;
    private final String description;
    private final LocalDate dateOfTransaction;
    private final BudgetCategory category;
    public static final String regexAccountNumber = &quot;[0-9]{4}+\\.[0-9]{2}+\\.[0-9]{5}&quot;;

    /**
     * This constructor creates a transaction object with the given parameters.
     *
     * @param fromAccountNumber The account number of the account that the money is being taken from
     * @param toAccountNumber   The account number of the account that the money is being transferred to
     * @param amount            The amount of money that is being transferred
     * @param description       A description of the transaction
     * @param dateOfTransaction The date that the transaction was made
     * @param category          The category that the transaction belongs to
     */
    public Transaction(String fromAccountNumber, String toAccountNumber, BigDecimal amount, String description,
<span class="fc" id="L38">                       LocalDate dateOfTransaction, BudgetCategory category) {</span>
<span class="pc bpc" id="L39" title="2 of 4 branches missed.">        if (!Pattern.matches(regexAccountNumber,fromAccountNumber) || !Pattern.matches(regexAccountNumber, toAccountNumber))</span>
<span class="nc" id="L40">            throw new IllegalArgumentException(&quot;This is not an account number&quot;);</span>
<span class="pc bpc" id="L41" title="1 of 2 branches missed.">        if (fromAccountNumber.isEmpty())</span>
<span class="nc" id="L42">            throw new IllegalArgumentException(&quot;From account number cannot be empty&quot;);</span>
<span class="pc bpc" id="L43" title="1 of 2 branches missed.">        if (toAccountNumber.isEmpty())</span>
<span class="nc" id="L44">            throw new IllegalArgumentException(&quot;To account number cannot be empty&quot;);</span>
<span class="pc bpc" id="L45" title="1 of 2 branches missed.">        if (description == null)</span>
<span class="nc" id="L46">            throw new IllegalArgumentException(&quot;Description cannot be null&quot;);</span>
<span class="pc bpc" id="L47" title="1 of 2 branches missed.">        if (dateOfTransaction == null)</span>
<span class="nc" id="L48">            throw new IllegalArgumentException(&quot;Date of transaction cannot be null&quot;);</span>
<span class="fc" id="L49">        this.category         = category;</span>
<span class="fc" id="L50">        this.fromAccountNumber = fromAccountNumber;</span>
<span class="fc" id="L51">        this.toAccountNumber   = toAccountNumber;</span>
<span class="fc" id="L52">        this.amount            = amount;</span>
<span class="fc" id="L53">        this.description       = description;</span>
<span class="fc" id="L54">        this.dateOfTransaction = dateOfTransaction;</span>
<span class="fc" id="L55">    }</span>


<span class="nc" id="L58">    public Transaction(TransactionBuilder transactionBuilder) {</span>
<span class="nc" id="L59">        this.fromAccountNumber = transactionBuilder.fromAccountNumber;</span>
<span class="nc" id="L60">        this.toAccountNumber   = transactionBuilder.toAccountNumber;</span>
<span class="nc" id="L61">        this.amount            = transactionBuilder.amount;</span>
<span class="nc" id="L62">        this.description       = transactionBuilder.description;</span>
<span class="nc" id="L63">        this.dateOfTransaction = transactionBuilder.dateOfTransaction;</span>
<span class="nc" id="L64">        this.category          = transactionBuilder.category;</span>
<span class="nc" id="L65">    }</span>

    /**
     * This method returns the account number of the account that the money is being taken from.
     *
     * @return The account number of the account that the money is being taken from
     */
    public String getFromAccountNumber() {
<span class="nc" id="L73">        return fromAccountNumber;</span>
    }

    /**
     * This method returns the account number of the account that the money is being transferred to.
     *
     * @return The account number of the account that the money is being transferred to
     */
    public String getToAccountNumber() {
<span class="nc" id="L82">        return toAccountNumber;</span>
    }

    /**
     * This method returns the amount of money that is being transferred.
     *
     * @return The amount of money that is being transferred
     */
    public BigDecimal getAmount() {
<span class="nc" id="L91">        return amount;</span>
    }

    /**
     * This method returns a description of the transaction.
     *
     * @return A description of the transaction
     */
    public String getDescription() {
<span class="nc" id="L100">        return description;</span>
    }

    /**
     * This method returns the date that the transaction was made.
     *
     * @return The date that the transaction was made
     */
    public LocalDate getDateOfTransaction() {
<span class="nc" id="L109">        return dateOfTransaction;</span>
    }

    /**
     * This method returns the category that the transaction belongs to.
     *
     * @return The category that the transaction belongs to
     */
    public BudgetCategory getCategory() {
<span class="nc" id="L118">        return category;</span>
    }

    //This method needs a better string representation of the transaction
    @Override
    public String toString() {
<span class="fc" id="L124">        return &quot;Transaction{&quot; + &quot;fromAccountNumber=&quot; + fromAccountNumber + &quot;, toAccountNumber=&quot; + toAccountNumber + &quot;, amount=&quot; + amount + &quot;, description=&quot; + description + &quot;, dateOfTransaction=&quot; + dateOfTransaction + &quot;, category=&quot; + category + '}';</span>
    }

    /**
     * This method is used to compare two transaction objects.
     *
     * @param o The object that is being compared to the transaction object
     * @return True if the transaction objects are equal, false otherwise
     */
    @Override
    public boolean equals(Object o) {
<span class="pc bpc" id="L135" title="1 of 2 branches missed.">        if (!(o instanceof Transaction))</span>
<span class="nc" id="L136">            return false;</span>

<span class="fc" id="L138">        Transaction t = (Transaction) o;</span>
<span class="pc bpc" id="L139" title="1 of 2 branches missed.">        if (!Objects.equals(amount, t.amount))</span>
<span class="nc" id="L140">            return false;</span>
<span class="pc bpc" id="L141" title="1 of 2 branches missed.">        if (!toAccountNumber.equals(t.toAccountNumber))</span>
<span class="nc" id="L142">            return false;</span>
<span class="pc bpc" id="L143" title="1 of 2 branches missed.">        if (!fromAccountNumber.equals(t.fromAccountNumber))</span>
<span class="nc" id="L144">            return false;</span>
<span class="pc bpc" id="L145" title="1 of 2 branches missed.">        if (!description.equals(t.description))</span>
<span class="nc" id="L146">            return false;</span>
<span class="pc bpc" id="L147" title="1 of 2 branches missed.">        if (!category.equals(t.category))</span>
<span class="nc" id="L148">            return false;</span>
<span class="fc" id="L149">        return dateOfTransaction.equals(t.dateOfTransaction);</span>
    }

    /**
     * This method is used to convert a transaction object to a string that can be saved to a CSV file.
     */
    public static final String CSV_FIELD_DELIMITER = &quot;;&quot;;
    public String toCSVString() {
<span class="fc" id="L157">        return dateOfTransaction.format(ApplicationObjects.dateFormatter) + CSV_FIELD_DELIMITER +</span>
                amount + CSV_FIELD_DELIMITER +
                toAccountNumber + CSV_FIELD_DELIMITER +
                fromAccountNumber + CSV_FIELD_DELIMITER +
                description + CSV_FIELD_DELIMITER
                + category;
    }

    /**
     * This method is used to convert a string from a CSV file to a transaction object.
     *
     * @param csvString The string that is being converted to a transaction object
     * @return The transaction object that is created from the string
     */
    public static Transaction fromCSVString(String csvString) {
<span class="fc" id="L172">        String[] fields = csvString.split(CSV_FIELD_DELIMITER);</span>
<span class="fc" id="L173">        String fromAccountNumber   = fields[3];</span>
<span class="fc" id="L174">        String toAccountNumber     = fields[2];</span>
<span class="fc" id="L175">        BigDecimal amount      = new BigDecimal(fields[1]);</span>
<span class="fc" id="L176">        String description     = fields[4];</span>
<span class="fc" id="L177">        LocalDate dateOfTransaction = LocalDate.parse(fields[0], ApplicationObjects.dateFormatter);</span>
<span class="fc" id="L178">        BudgetCategory budgetCategory = BudgetCategory.valueOf(fields[5]);</span>

<span class="fc" id="L180">        return new Transaction(fromAccountNumber, toAccountNumber, amount, description, dateOfTransaction, budgetCategory);</span>
    }

<span class="nc" id="L183">    public static class TransactionBuilder {</span>
        private String fromAccountNumber;
        private String toAccountNumber;
        private BigDecimal amount;
        private String description;
        private LocalDate dateOfTransaction;
        private BudgetCategory category;
        public Transaction build() {
<span class="nc bnc" id="L191" title="All 2 branches missed.">            if (!validateBuilder())</span>
<span class="nc" id="L192">                return new Transaction(this);</span>
<span class="nc" id="L193">            else throw new IllegalStateException(&quot;Transaction not fully defined during build&quot;);</span>
        }
        public TransactionBuilder fromAccountNumber(String fromAccountNumber) {
<span class="nc bnc" id="L196" title="All 2 branches missed.">            if (!Pattern.matches(regexAccountNumber,fromAccountNumber))</span>
<span class="nc" id="L197">                throw new IllegalArgumentException(&quot;This is not an account number&quot;);</span>
<span class="nc" id="L198">            this.fromAccountNumber = fromAccountNumber;</span>
<span class="nc" id="L199">            return this;</span>
        }
        public TransactionBuilder toAccountNumber(String toAccountNumber) {
<span class="nc bnc" id="L202" title="All 2 branches missed.">            if (!Pattern.matches(regexAccountNumber, toAccountNumber))</span>
<span class="nc" id="L203">                throw new IllegalArgumentException(&quot;This is not an account number&quot;);</span>
<span class="nc" id="L204">            this.toAccountNumber = toAccountNumber;</span>
<span class="nc" id="L205">            return this;</span>
        }
        public TransactionBuilder description(String description) {
<span class="nc bnc" id="L208" title="All 2 branches missed.">            if (description == null)</span>
<span class="nc" id="L209">                throw new IllegalArgumentException(&quot;Description cannot be null&quot;);</span>
<span class="nc" id="L210">            this.description = description;</span>
<span class="nc" id="L211">            return this;</span>
        }
        public TransactionBuilder dateOfTransaction(LocalDate dateOfTransaction) {
<span class="nc bnc" id="L214" title="All 2 branches missed.">            if (dateOfTransaction == null)</span>
<span class="nc" id="L215">                throw new IllegalArgumentException(&quot;Date of transaction cannot be null&quot;);</span>
<span class="nc" id="L216">            this.dateOfTransaction = dateOfTransaction;</span>
<span class="nc" id="L217">            return this;</span>
        }
        public TransactionBuilder category(BudgetCategory category) {
<span class="nc" id="L220">            this.category = category;</span>
<span class="nc" id="L221">            return this;</span>
        }
        public TransactionBuilder amount(BigDecimal amount) {
<span class="nc" id="L224">            this.amount = amount;</span>
<span class="nc" id="L225">            return this;</span>
        }
        private boolean validateBuilder() {
<span class="nc bnc" id="L228" title="All 12 branches missed.">            return this.dateOfTransaction == null || this.amount == null || this.category == null</span>
                    || this.description == null || this.fromAccountNumber == null || this.toAccountNumber == null;
        }
    }

}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>