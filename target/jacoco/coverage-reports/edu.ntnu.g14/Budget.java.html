<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>Budget.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">demo</a> &gt; <a href="index.source.html" class="el_package">edu.ntnu.g14</a> &gt; <span class="el_source">Budget.java</span></div><h1>Budget.java</h1><pre class="source lang-java linenums">package edu.ntnu.g14;

import java.math.BigDecimal;
import java.util.ArrayList;
import java.util.List;


public class Budget {

    private static final char CSV_DELIMITER = ',';

<span class="fc" id="L12">    private BigDecimal salary = BigDecimal.ZERO;</span>
<span class="fc" id="L13">    private BigDecimal savings = BigDecimal.ZERO;</span>
    private byte age;
    private GenderCategory gender;

    private HouseholdCategory household;
<span class="fc" id="L18">    private final List&lt;BudgetItem&gt; entries = new ArrayList&lt;&gt;();</span>



    /**
     * Creates a new empty budget.
     * @param i The age of the person following this budget.
     * @param ownerGender The gender of the person following this budget.
     */
<span class="fc" id="L27">    public Budget(byte i, GenderCategory ownerGender) {</span>
<span class="fc" id="L28">        this.age = i;</span>
<span class="fc" id="L29">        this.gender = ownerGender;</span>
<span class="fc" id="L30">        this.household = HouseholdCategory.LIVING_ALONE;</span>
<span class="fc" id="L31">    }</span>

<span class="fc" id="L33">    public Budget(HouseholdCategory householdSize) {</span>
<span class="fc" id="L34">        this.household = householdSize;</span>
<span class="fc" id="L35">    }</span>


    /**
     * Adds a new budget item to this budget.
     * @param newBudgetItem The new budget item to be added to this budget.
     */
    public void addBudgetItem(BudgetItem newBudgetItem) {
<span class="fc" id="L43">        entries.add(newBudgetItem);</span>
<span class="fc" id="L44">        newBudgetItem.setAssociatedBudget(this);</span>
<span class="fc" id="L45">    }</span>

    /**
     * Returns the number of budget items currently in this budget.
     * @return the number of budget items currently in this budget.
     */
    public int getNumBudgetItems() {
<span class="nc" id="L52">        return entries.size();</span>
    }

    /**
     * Attempts to remove the submitted budget item from this Budget.
     * @param index the index of the BudgetItem to be removed from this Budget.
     *              The index scheme follows the one present in the List-object returned by Budget::getEntries().
     * @return true if the object was found and removed. Else, returns false.
     */
    public boolean removeBudgetItem(int index) {
<span class="nc" id="L62">        BudgetItem removed = entries.remove(index);</span>
<span class="nc bnc" id="L63" title="All 2 branches missed.">        if (removed == null)</span>
<span class="nc" id="L64">            return false;</span>

<span class="nc" id="L66">        removed.setAssociatedBudget(null);</span>
<span class="nc" id="L67">        return true;</span>
    }

    // BigDecimal salary = BigDecimal.ZERO;
    // BigDecimal savings = BigDecimal.ZERO;
    // byte age;
    // GenderCategory gender;
    // final List&lt;BudgetItem&gt; entries = new ArrayList&lt;&gt;();

    @Override
    public boolean equals(Object o) {
<span class="pc bpc" id="L78" title="1 of 2 branches missed.">        if (o == null)</span>
<span class="nc" id="L79">            return false;</span>
<span class="pc bpc" id="L80" title="1 of 2 branches missed.">        if (!(o instanceof Budget))</span>
<span class="nc" id="L81">            return false;</span>

<span class="pc bpc" id="L83" title="1 of 2 branches missed.">        return o.hashCode() == this.hashCode();</span>
    }

    @Override
    public int hashCode() {
<span class="fc" id="L88">        int hash = salary.hashCode() * savings.hashCode() * age * entries.hashCode();</span>
<span class="fc bfc" id="L89" title="All 2 branches covered.">        if (gender != null)</span>
<span class="fc" id="L90">            hash *= gender.hashCode();</span>
<span class="fc bfc" id="L91" title="All 2 branches covered.">        if (household != null)</span>
<span class="fc" id="L92">            hash *= household.hashCode();</span>

<span class="fc" id="L94">        return hash;</span>
    }

    public String toCSV() {
<span class="fc" id="L98">        StringBuilder allEntries = new StringBuilder();</span>
<span class="fc bfc" id="L99" title="All 2 branches covered.">        for (BudgetItem b : entries)</span>
<span class="fc" id="L100">            allEntries.append(b.toCSV()).append(CSV_DELIMITER);</span>

        // Pop the last element, as it is a lone delimiter.
<span class="fc" id="L103">        allEntries.deleteCharAt(allEntries.length() - 1);</span>

<span class="fc" id="L105">        return  salary .toPlainString() + CSV_DELIMITER +</span>
<span class="fc" id="L106">                savings.toPlainString() + CSV_DELIMITER +</span>
                age                     + CSV_DELIMITER +
                gender                  + CSV_DELIMITER +
                household               + CSV_DELIMITER +
<span class="fc" id="L110">                allEntries.toString();</span>
    }

    public static Budget fromCSV(String data) {
<span class="fc" id="L114">        final String[] fields = data.split(CSV_DELIMITER + &quot;(?!\\s)&quot;);</span>
<span class="fc" id="L115">        final BigDecimal salary = new BigDecimal(fields[0]);</span>
<span class="fc" id="L116">        final BigDecimal savings = new BigDecimal(fields[1]);</span>
<span class="fc" id="L117">        final byte age = Byte.parseByte(fields[2]);</span>
<span class="fc bfc" id="L118" title="All 2 branches covered.">        final GenderCategory gender = fields[3].equals(&quot;null&quot;) ? null : GenderCategory.valueOf(fields[3]);</span>
<span class="fc bfc" id="L119" title="All 2 branches covered.">        final HouseholdCategory householdCategory = fields[4].equals(&quot;null&quot;) ? null : HouseholdCategory.valueOf(fields[4]);</span>
<span class="fc" id="L120">        final List&lt;BudgetItem&gt; entries = new ArrayList&lt;&gt;();</span>

<span class="fc bfc" id="L122" title="All 2 branches covered.">        for (int i = 5; i &lt; fields.length; i++) {</span>
<span class="fc" id="L123">            entries.add(BudgetItem.fromCSV(fields[i]));</span>
        }

<span class="fc" id="L126">        Budget budget = new Budget(age, gender);</span>
<span class="fc" id="L127">        budget.setSalary(salary);</span>
<span class="fc" id="L128">        budget.setSavings(savings);</span>
<span class="fc" id="L129">        budget.setSavings(savings);</span>
<span class="fc" id="L130">        budget.setHouseholdCategory(householdCategory);</span>

<span class="fc bfc" id="L132" title="All 2 branches covered.">        for (BudgetItem i : entries) {</span>
<span class="fc" id="L133">            budget.addBudgetItem(i);</span>
<span class="fc" id="L134">            i.setAssociatedBudget(budget);</span>
<span class="fc" id="L135">        }</span>

<span class="fc" id="L137">        return budget;</span>
    }

    private void setHouseholdCategory(HouseholdCategory householdCategory) {
<span class="fc" id="L141">        this.household = householdCategory;</span>
<span class="fc" id="L142">    }</span>

    /**
     * Updates the associated results of this budget. This method should be called every time a change the budget is made.
     */
    public void updateCalculations() {
        // As of now, nothing to update or recalculate.
<span class="fc" id="L149">    }</span>

    /**
     * Clears the entries in this Budget.
     */
    public void clearEntries() {
<span class="nc" id="L155">        this.entries.clear();</span>
<span class="nc" id="L156">    }</span>


    /**
     * Sets the salary registered with this budget.
     * @param salary the salary registered with this budget.
     */
    public void setSalary(BigDecimal salary) {
<span class="pc bpc" id="L164" title="1 of 2 branches missed.">        if (salary == null)</span>
<span class="nc" id="L165">            throw new IllegalArgumentException(&quot;Salary cannot be null&quot;);</span>
<span class="pc bpc" id="L166" title="1 of 2 branches missed.">        if (salary.compareTo(BigDecimal.ZERO) &lt; 0)</span>
<span class="nc" id="L167">            throw new IllegalArgumentException(&quot;Salary cannot be a negative number.&quot;);</span>
<span class="fc" id="L168">        this.salary = salary;</span>
<span class="fc" id="L169">        updateCalculations();</span>
<span class="fc" id="L170">    }</span>

    /**
     * Sets the savings registered with this budget.
     * @param savings the savings registered with this budget.
     */
    public void setSavings(BigDecimal savings) {
<span class="pc bpc" id="L177" title="1 of 2 branches missed.">        if (savings == null)</span>
<span class="nc" id="L178">            throw new IllegalArgumentException(&quot;Savings cannot be null&quot;);</span>
<span class="pc bpc" id="L179" title="1 of 2 branches missed.">        if (savings.compareTo(BigDecimal.ZERO) &lt; 0)</span>
<span class="nc" id="L180">            throw new IllegalArgumentException(&quot;Savings cannot be a negative number.&quot;);</span>
<span class="fc" id="L181">        this.savings = savings;</span>
<span class="fc" id="L182">        updateCalculations();</span>
<span class="fc" id="L183">    }</span>

    /**
     * Sets the age of the person following this budget.
     * @param age the age of the person following this budget.
     */
    public void setAge(byte age) {
<span class="nc bnc" id="L190" title="All 2 branches missed.">        if (age &lt; 0)</span>
<span class="nc" id="L191">            throw new IllegalArgumentException(&quot;The age of the person following this budget cannot be negative.&quot;);</span>
<span class="nc" id="L192">        this.age = age;</span>
<span class="nc" id="L193">        updateCalculations();</span>
<span class="nc" id="L194">    }</span>

    /**
     * Sets the gender of the person following this budget.
     * @param gender the gender of the person following this budget.
     */
    public void setGender(GenderCategory gender) {
<span class="fc" id="L201">        this.gender = gender;</span>
<span class="fc" id="L202">        updateCalculations();</span>
<span class="fc" id="L203">    }</span>

    public HouseholdCategory getCategory() {
<span class="nc" id="L206">        return household;</span>
    }

    /**
     * Returns the salary registered with this budget.
     * @return the salary registered with this budget.
     */
    public BigDecimal getSalary() {
<span class="nc" id="L214">        return salary;</span>
    }

    /**
     * Returns the savings registered with this budget.
     * @return the savings registered with this budget.
     */
    public BigDecimal getSavings() {
<span class="nc" id="L222">        return savings;</span>
    }

    /**
     * Returns the age of the person following this budget.
     * @return the age of the person following this budget.
     */
    public byte getAge() {
<span class="nc" id="L230">        return age;</span>
    }

    /**
     * Returns the gender of the person following this budget.
     * @return the gender of the person following this budget.
     */
    public GenderCategory getGender() {
<span class="nc" id="L238">        return gender;</span>
    }

    public HouseholdCategory getHouseholdCategory() {
<span class="nc" id="L242">        return household;</span>
    }

    /**
     * Returns the budget items of this Budget. The returned object is a copy of the internal List-object containing all the BudgetItems.
     * However, changes made to the existing elements in the returned List-object will make changes to this budget.
     * @return the budget items of this Budget.
     */
    public List&lt;BudgetItem&gt; getEntries() {
<span class="nc" id="L251">        return new ArrayList&lt;&gt;(entries);</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>